{
  "hash": "e421d71bf139efe3aa4e3a6c1d9501e1",
  "result": {
    "markdown": "---\ntitle: \"Importation des données\"\ntitle-block-banner: true\ndescription: | \n  Fonction qui permet le téléchargement des bases de données.\n# à changer\ndate: \"2022-12-21\"\n# Modifier les détails que vous voulez\nauthor:\n  - name: \"Rémi Turcot-Roy\"\n    # Votre site web perso ou github\n    url: https://github.com/rTurcotroy\n    # les champs d'affiliation sont optionnels, vous pouvez les\n    # comment out en ajoutant un # devant.\n    affiliation: FAS1002\n    affiliation-url: https://FAS1002.github.io/A22\n    # changer pour votre propre orcid id\n    # https://orcid.org/ pour vous inscrire.\n    orcid: 0000-0000-0000-0000\n\n# TRUE == Générer une citation pour cette page précise. Pour enlever, mettre false.\ncitation: true\n# Inclure les références que vous utilisez dans vos rapports. Je conseille Zotero pour construire\n# ce fichier ou de connecter RStudio directement pour pouvoir citer avec @nom-de-reference.\nbibliography: references.bib\n---\n\n\n# Les données\n\nPour commencer, il est important de télécharger les données que nous utiliserons pour ce travail. Ceux-ci proviennent de deux sources différentes et nous avions certaines conditions à respecter. Nous devions télécharger les données avec un certain cycle. Pour faire cela, nous avons créé une fonction qui demande la récurrence des téléchargements, le nom que l'on veut donner au document et l'URL du document. Pour les données provenant de Our World in Data^1^ , il a été simple de les télécharger via la fonction. Ce qui n'a pas été le cas avec la seconde base de données Gapminder^2^ qui sont sous format ,xlsx, mais surtout qui n'a visiblement pas d'URL de téléchargement fonctionnel sans l'implication humaine.\n\nAinsi, la suite du travail consiste en l'exploration des données et de l'analyse de ceux-ci\n\n\n::: {.cell}\n\n:::\n\n::: {.cell hash='import_cache/html/download_c36feaa58f5d1801cfcd8846b6137baf'}\n\n```{.r .cell-code}\nlist.files(\"data/raw\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"12_energy_data.csv\"      \"12_expectancy_data.xlsx\"\n[3] \"2022-12-19_Co2_data.csv\" \"2022-12-20_Co2_data.csv\"\n```\n:::\n\n```{.r .cell-code}\nbas_path <- path(\"data\", \"raw\")\n\ntelechargement <-function(recurence, nom, url){\n    x =0 \n    trouve = 0\n    if (recurence == \"jour\") {\n        aujourd <- paste(today(), nom, sep = \"_\") \n        dateChoisi <- today()\n        print(aujourd)\n        \n    } else if (recurence == \"mois\") {\n        aujourd <- paste(month(today()), nom, sep = \"_\")\n        dateChoisi <- month(today())\n        print(aujourd)\n        \n    }\n    \n    \n    while (x <= length(list.files(\"data/raw\"))) {\n        x = x +1\n        \n        \n        if (x > 0 & x <= length(list.files(\"data/raw\"))) {\n            if (aujourd == list.files(\"data/raw\")[x]) {\n                trouve = 1\n                print(\"trouve\")\n            }\n        }\n       \n        \n\n    }\n    if (trouve == 0 ) {\n        URL <- url\n\n        fname <- paste(dateChoisi, nom, sep = \"_\")\n\n        fpath <- path(bas_path, fname)\n\n        download.file(url = URL, \n                          destfile = fpath)\n        trouve = 1\n            \n    }\n    return(\"succes\")\n}\n\ntelechargement(\"jour\", \"Co2_data.csv\", \"https://nyc3.digitaloceanspaces.com/owid-public/data/co2/owid-co2-data.csv\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"2022-12-20_Co2_data.csv\"\n[1] \"trouve\"\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"succes\"\n```\n:::\n\n```{.r .cell-code}\ntelechargement(\"mois\", \"energy_data.csv\", \"https://nyc3.digitaloceanspaces.com/owid-public/data/energy/owid-energy-data.csv\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"12_energy_data.csv\"\n[1] \"trouve\"\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"succes\"\n```\n:::\n\n```{.r .cell-code}\n#telechargement(\"mois\", \"expectancy_data.xlsx\", \"https://raw.githubusercontent.com/Gapminder-Indicators/lex/master/lex-by-gapminder.xlsx\")\n\n\n\nlist.files(\"data/raw\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"12_energy_data.csv\"      \"12_expectancy_data.xlsx\"\n[3] \"2022-12-19_Co2_data.csv\" \"2022-12-20_Co2_data.csv\"\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nCo2_name <- paste(today(), \"Co2_data.csv\", sep = \"_\") \nenergy_name <- paste(month(today()), \"energy_data.csv\", sep = \"_\") \nexpectancy_name <- paste(month(today()), \"expectancy_data.xlsx\", sep = \"_\") \n\nCo2_data <-  read.csv(file = path(bas_path, Co2_name))\nEnergy_data <- read.csv(file = path(bas_path, energy_name))\n#expectancy_data <- read_excel(\"data/raw/12_expectancy_data.xlsx\", \n#sheet = \"countries_and_territories\")\n```\n:::\n\n\nLes données proviennent entre autres de:\n\n@owidenergy\n\n@gaplife\n\n@owidco2\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}